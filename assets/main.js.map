{"version":3,"file":"main.js","sources":["../../src/js/retencao.js","../../src/js/whatsapp.js","../../src/js/themeToggle.js","../../src/js/observar.js","../../src/js/modal_checkout.js","../../src/js/monitor_inp.js","../../src/js/main.js"],"sourcesContent":["export function configurarRetencao() {\n    const modal = document.getElementById('modal-retencao');\n    const btnFicar = document.getElementById('btn-ficar');\n    const btnSair = document.getElementById('btn-sair');\n    \n    let isModalOpen = false;\n\n    const ativarRetencao = () => {\n        // Se j√° tem a trava no hist√≥rico, n√£o faz nada\n        if (window.history.state?.trava) return;\n\n        // Cria o estado virtual \"trava\"\n        window.history.pushState({ trava: true }, \"\");\n        console.log(\"Sistema de reten√ß√£o pronto.\");\n\n        window.onpopstate = (event) => {\n            // Se o usu√°rio tentou voltar e o modal n√£o est√° aberto\n            if (!isModalOpen) {\n                isModalOpen = true;\n                modal.style.display = 'flex';\n\n                // Importante: Empurramos o estado de novo para o modal \"prender\" o usu√°rio\n                // Mas sem disparar o onpopstate novamente\n                window.history.pushState({ trava: true }, \"\");\n            }\n        };\n    };\n\n  btnFicar.onclick = () => {\n    modal.style.display = 'none';\n    const msg = encodeURIComponent(\"Vim pela p√°gina de Elite e quero meu Diagn√≥stico de Escala. Estou cansado do operacional.\");\n    window.open(`https://wa.me/5511999999999?text=${msg}`, '_blank');\n};\n\n    btnSair.onclick = () => {\n        isModalOpen = false;\n        modal.style.display = 'none';\n        window.onpopstate = null; // Mata a fun√ß√£o de interceptar\n        \n        // Volta dois n√≠veis: o da trava e o da p√°gina anterior real\n        window.history.go(-2); \n    };\n\n    document.addEventListener('click', ativarRetencao, { once: true });\n    document.addEventListener('scroll', ativarRetencao, { once: true });\n}","export function enviarWhatsApp(url) {\n    const form = document.querySelector('#seu-formulario'); // Use o ID do seu form\n    if (!form) return;\n\n    form.addEventListener('submit', async (e) => {\n        e.preventDefault();\n        const btn = form.querySelector('button');\n        btn.disabled = true;\n        btn.innerText = \"Enviando...\";\n\n        const dados = Object.fromEntries(new FormData(form).entries());\n\n        try {\n            const res = await fetch(url, {\n                method: 'POST',\n                body: JSON.stringify(dados)\n            });\n            if (res.ok) window.location.href = \"/obrigado.html\";\n        } catch (err) {\n            alert(\"Erro ao enviar. Tente novamente.\");\n            btn.disabled = false;\n            btn.innerText = \"Enviar\";\n        }\n    });\n}","  export default function themeToggle() {\n     const themeToggle = document.getElementById('theme-toggle');\n        themeToggle.addEventListener('click', () => {\n            // Verificamos se o tema atual √© light\n            const isLight = document.documentElement.getAttribute('data-theme') === 'light';\n            \n            if (isLight) {\n                // Mudar para Dark\n                document.documentElement.setAttribute('data-theme', 'dark');\n                localStorage.setItem('theme', 'dark');\n            } else {\n                // Mudar para Light\n                document.documentElement.setAttribute('data-theme', 'light');\n                localStorage.setItem('theme', 'light');\n            }\n        });\n  }\n  \n ","export default function observer(){\n    const observerOptions = {\n    root: null,\n    rootMargin: \"0px\",\n    threshold: 0.01      // Dispara IMEDIATAMENTE ao detectar o elemento\n};\n\nconst observer = new IntersectionObserver((entries) => {\n    entries.forEach(entry => {\n        const target = entry.target;\n        \n        if (entry.isIntersecting) {\n            // LIGA TUDO\n            target.classList.add('active');\n            target.classList.add('animate');\n            // Se for um elemento individual de REVEAL, para de observar para sempre\n            if (target.classList.contains('reveal')) {\n                observer.unobserve(target);\n            }\n        } else {\n            // DESLIGA apenas as se√ß√µes (n√£o entra aqui para .reveal porque j√° demos unobserve)\n            target.classList.remove('active');\n        }\n    });\n}, observerOptions);\n\n// Registra todos os alvos\ndocument.querySelectorAll('.reveal, header, section, footer').forEach(el => {\n    observer.observe(el);\n});        \n\n}","export default  function modal_checkout() {\n       // 1. SELE√á√ÉO DE ELEMENTOS\n    const modal = document.getElementById(\"modal-compra\");\n    const btnTrigger = document.getElementById(\"quero-ser-elite\");\n    const btnClose = document.querySelector(\".modal__close\");\n    const btnCheckout = document.querySelector(\".btn-checkout\");\n    const btnIcon = document.getElementById(\"btn-icon-treinamento\")\n    const cta_faq = document.getElementById(\"cta_faq\")\n    const btn_hero__button = document.getElementById(\"btn_hero__button\")\n\n    // 2. FUN√á√ÉO DE PERFORMANCE (CARREGAMENTO DIN√ÇMICO)\n    const loadExternalScript = (src) => {\n        return new Promise((resolve, reject) => {\n            // Se o script j√° existir, resolve imediatamente\n            if (document.querySelector(`script[src=\"${src}\"]`)) return resolve();\n            \n            const script = document.createElement('script');\n            script.src = src;\n            script.async = true; // N√£o trava o carregamento\n            script.onload = resolve;\n            script.onerror = reject;\n            document.head.appendChild(script);\n        });\n    };\n\n    // 3. FUN√á√ïES DE CONTROLE DO MODAL\n    const abrirModal = (e) => {\n        e.preventDefault();\n        modal.style.display = \"flex\";\n        document.body.style.overflow = \"hidden\"; // Trava scroll do fundo\n        \n        // Pr√©-carrega o SDK assim que o modal abre para ganhar tempo\n        loadExternalScript(\"https://sdk.mercadopago.com/js/v2\")\n            .catch(err => console.error(\"Erro ao pr√©-carregar SDK\", err));\n    };\n\n    const fecharModal = () => {\n        modal.style.display = \"none\";\n        document.body.style.overflow = \"auto\"; // Devolve scroll\n    };\n\n    // 4. L√ìGICA DO CHECKOUT (SIMULA√á√ÉO API)\n    const handleCheckout = async () => {\n        // Feedback visual imediato\n        btnCheckout.innerHTML = `<span class=\"spinner\"></span> PROCESSANDO...`;\n        btnCheckout.style.pointerEvents = \"none\";\n\n        try {\n            // Garante que o SDK est√° dispon√≠vel\n            await loadExternalScript(\"https://sdk.mercadopago.com/js/v2\");\n\n            // Simula o tempo de resposta da API\n            setTimeout(() => {\n                const overlay = document.createElement('div');\n                overlay.className = 'api-simulada-overlay';\n                overlay.innerHTML = `\n                    <div class=\"api-simulada-content\">\n                        <img src=\"https://img.icons8.com/color/96/mercado-pago.png\" alt=\"Mercado Pago\">\n                        <h3>Ambiente de Demonstra√ß√£o</h3>\n                        <p>A API do Mercado Pago foi carregada com sucesso via script din√¢mico para garantir <strong>Performance M√°xima (Core Web Vitals)</strong>.</p>\n                        <div class=\"status-badge\">DEVELOPER MODE: ONLINE</div>\n                        <button onclick=\"this.parentElement.parentElement.remove()\" class=\"btn-close-api\">VOLTAR AO PROJETO</button>\n                    </div>\n                `;\n                document.body.appendChild(overlay);\n\n                // Reset do bot√£o\n                btnCheckout.innerHTML = \"FINALIZAR INSCRI√á√ÉO AGORA\";\n                btnCheckout.style.pointerEvents = \"all\";\n            }, 1500);\n\n        } catch (error) {\n            btnCheckout.innerHTML = \"ERRO NA CONEX√ÉO\";\n            btnCheckout.style.pointerEvents = \"all\";\n        }\n    };\n\n    // 5. EVENT LISTENERS\n    if (btnTrigger) btnTrigger.addEventListener(\"click\", abrirModal);\n    if (cta_faq) cta_faq.addEventListener(\"click\", abrirModal);\n    if (btn_hero__button) btn_hero__button.addEventListener(\"click\", abrirModal);\n    if (btnIcon) btnIcon.addEventListener(\"click\", abrirModal);\n    if (btnClose) btnClose.addEventListener(\"click\", fecharModal);\n    if (btnCheckout) btnCheckout.addEventListener(\"click\", handleCheckout);\n\n\n    // Fechar ao clicar fora ou ESC\n    window.addEventListener(\"click\", (e) => { if (e.target === modal) fecharModal(); });\n    document.addEventListener(\"keydown\", (e) => { if (e.key === \"Escape\") fecharModal(); });\n}","export default function monitor_inp(){\nnew PerformanceObserver((entryList) => {\n  for (const entry of entryList.getEntries()) {\n    const duration = entry.duration;\n    const score = duration < 200 ? '‚úÖ EXCELENTE' : duration < 500 ? '‚ö†Ô∏è NECESSITA MELHORIA' : '‚ùå POBRE';\n    \n    console.log(`%c[Intera√ß√£o Detectada]: ${entry.name}`, 'font-weight: bold; color: blue');\n    console.log(`Dura√ß√£o: ${duration.toFixed(2)}ms | Status: ${score}`);\n    \n    if (duration > 200) {\n      console.warn('Dica: Verifique se h√° Long Tasks ou se est√° usando propriedades que disparam Layout/Paint no clique.');\n    }\n  }\n}).observe({ type: 'event', buffered: true });\n\n// Monitor de \"Long Tasks\" (Tarefas que travam o navegador por mais de 50ms)\nnew PerformanceObserver((list) => {\n  for (const entry of list.getEntries()) {\n    console.error(`%c[Alerta de Gargalo]: Tarefa pesada detectada (${entry.duration.toFixed(2)}ms)!`, 'color: red; font-weight: bold');\n    console.log('Isso pode travar a rea√ß√£o ao clique e baixar seu INP.');\n  }\n}).observe({ type: 'longtask', buffered: true });\n}","import '../scss/style.scss';\n\n// 2. Importa o CSS Cr√≠tico APENAS em ambiente de desenvolvimento\nif (import.meta.env.DEV) {\n  import('../scss/critical.scss');\n}\n\n// Importamos as fun√ß√µes de outros arquivos (o Vite vai unir tudo)\nimport { configurarRetencao } from './retencao.js';\nimport { enviarWhatsApp } from './whatsapp.js';\nimport themeToggle from './themeToggle.js';\nimport observar from './observar.js';\nimport modal_checkout from './modal_checkout.js';\nimport monitor_inp from './monitor_inp.js';\n\n// Aguarda o carregamento para n√£o travar a renderiza√ß√£o inicial\nwindow.addEventListener('load', () => {\n    requestAnimationFrame(() => {\n        console.log(\"üöÄ Sistemas de alta performance iniciados\");\n        \n        // 0.  MODAL CHECKOUT E PAGAMENTO  \n        modal_checkout()\n        \n        // 1. Mudan√ßa de thema\n        themeToggle();\n\n\n        // 2. Ativa a reten√ß√£o (espera o primeiro clique para ganhar permiss√£o do Chrome)\n        configurarRetencao();\n\n        // 3. Interssection observer\n        observar()\n\n        // 4. Monitor de Intera√ß√µes (INP / Lat√™ncia de Clique)\n        monitor_inp()\n\n        // 2. Ativa o envio do formul√°rio\n        enviarWhatsApp('SUA_URL_DO_WORKER_AQUI');\n\n    });\n});"],"names":["configurarRetencao","modal","btnFicar","btnSair","isModalOpen","ativarRetencao","event","msg","enviarWhatsApp","url","form","e","btn","dados","themeToggle","observer","observerOptions","entries","entry","target","el","modal_checkout","btnTrigger","btnClose","btnCheckout","btnIcon","cta_faq","btn_hero__button","loadExternalScript","src","resolve","reject","script","abrirModal","err","fecharModal","handleCheckout","overlay","monitor_inp","entryList","duration","score","list","observar"],"mappings":"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"}