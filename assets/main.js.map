{"version":3,"file":"main.js","sources":["../../src/js/retencao.js","../../src/js/themeToggle.js","../../src/js/observar.js","../../src/js/modal_checkout.js","../../src/js/main.js"],"sourcesContent":["export function configurarRetencao() {\n    const modal = document.getElementById('modal-retencao');\n    const btnFicar = document.getElementById('btn-ficar');\n    const btnSair = document.getElementById('btn-sair');\n    \n    let isModalOpen = false;\n\n    const ativarRetencao = () => {\n        // Se j√° tem a trava no hist√≥rico, n√£o faz nada\n        if (window.history.state?.trava) return;\n\n        // Cria o estado virtual \"trava\"\n        window.history.pushState({ trava: true }, \"\");\n        console.log(\"Sistema de reten√ß√£o pronto.\");\n\n        window.onpopstate = (event) => {\n            // Se o usu√°rio tentou voltar e o modal n√£o est√° aberto\n            if (!isModalOpen) {\n                isModalOpen = true;\n                modal.style.display = 'flex';\n\n                // Importante: Empurramos o estado de novo para o modal \"prender\" o usu√°rio\n                // Mas sem disparar o onpopstate novamente\n                window.history.pushState({ trava: true }, \"\");\n            }\n        };\n    };\n\n  btnFicar.onclick = () => {\n    modal.style.display = 'none';\n    const msg = encodeURIComponent(\"Vim pela p√°gina de Elite e quero meu Diagn√≥stico de Escala. Estou cansado do operacional.\");\n    window.open(`https://wa.me/5511999999999?text=${msg}`, '_blank');\n};\n\n    btnSair.onclick = () => {\n        isModalOpen = false;\n        modal.style.display = 'none';\n        window.onpopstate = null; // Mata a fun√ß√£o de interceptar\n        \n        // Volta dois n√≠veis: o da trava e o da p√°gina anterior real\n        window.history.go(-2); \n    };\n\n    document.addEventListener('click', ativarRetencao, { once: true });\n    document.addEventListener('scroll', ativarRetencao, { once: true });\n}","  export default function themeToggle() {\n     const themeToggle = document.getElementById('theme-toggle');\n        themeToggle.addEventListener('click', () => {\n            // Verificamos se o tema atual √© light\n            const isLight = document.documentElement.getAttribute('data-theme') === 'light';\n            \n            if (isLight) {\n                // Mudar para Dark\n                document.documentElement.setAttribute('data-theme', 'dark');\n                localStorage.setItem('theme', 'dark');\n            } else {\n                // Mudar para Light\n                document.documentElement.setAttribute('data-theme', 'light');\n                localStorage.setItem('theme', 'light');\n            }\n        });\n  }\n  \n ","export default function observer(){\n    const observerOptions = {\n    root: null,\n    rootMargin: \"0px\",\n    threshold: 0.1      // Dispara IMEDIATAMENTE ao detectar o elemento\n};\n\nconst observer = new IntersectionObserver((entries) => {\n    entries.forEach(entry => {\n        const target = entry.target;\n        \n        if (entry.isIntersecting) {\n            // Usa requestAnimationFrame para n√£o travar a Main Thread\n            requestAnimationFrame(() => {\n                target.classList.add('active');\n                target.classList.add('animate');\n            });\n\n            if (target.classList.contains('reveal')) {\n                observer.unobserve(target);\n            }\n        } else {\n            // Evita remover classes de se√ß√µes que j√° passaram se n√£o for estritamente necess√°rio\n            if (!target.classList.contains('reveal')) {// se der erro remova\n                requestAnimationFrame(() => {\n                    target.classList.remove('active');\n                });\n            }\n        }\n    });\n}, observerOptions);\n\n// Registra todos os alvos\ndocument.querySelectorAll('.reveal, header, section, footer').forEach(el => {\n    observer.observe(el);\n});        \n\n}\n\n","export default  function modal_checkout() {\n       // 1. SELE√á√ÉO DE ELEMENTOS\n    const modal = document.getElementById(\"modal-compra\");\n    const btnTrigger = document.getElementById(\"quero-ser-elite\");\n    const btnClose = document.querySelector(\".modal__close\");\n    const btnCheckout = document.querySelector(\".btn-checkout\");\n    const btnIcon = document.getElementById(\"btn-icon-treinamento\")\n    const cta_faq = document.getElementById(\"cta_faq\")\n    const btn_hero__button = document.getElementById(\"btn_hero__button\")\n    const offer_mockup=document.getElementById(\"offer_mockup\")\n    const quero=document.getElementById(\"quero-ser-elite\")\n    \n\n    // 2. FUN√á√ÉO DE PERFORMANCE (CARREGAMENTO DIN√ÇMICO)\n    const loadExternalScript = (src) => {\n        return new Promise((resolve, reject) => {\n            // Se o script j√° existir, resolve imediatamente\n            if (document.querySelector(`script[src=\"${src}\"]`)) return resolve();\n            \n            const script = document.createElement('script');\n            script.src = src;\n            script.async = true; // N√£o trava o carregamento\n            script.onload = resolve;\n            script.onerror = reject;\n            document.head.appendChild(script);\n        });\n    };\n\n    // 3. FUN√á√ïES DE CONTROLE DO MODAL\n    const abrirModal = (e) => {\n        e.preventDefault();\n        modal.style.display = \"flex\";\n        document.body.style.overflow = \"hidden\"; // Trava scroll do fundo\n        \n        // Pr√©-carrega o SDK assim que o modal abre para ganhar tempo\n        loadExternalScript(\"https://sdk.mercadopago.com/js/v2\")\n            .catch(err => console.error(\"Erro ao pr√©-carregar SDK\", err));\n    };\n\n    const fecharModal = () => {\n        modal.style.display = \"none\";\n        document.body.style.overflow = \"auto\"; // Devolve scroll\n    };\n\n    // 4. L√ìGICA DO CHECKOUT (SIMULA√á√ÉO API)\n    const handleCheckout = async () => {\n        // Feedback visual imediato\n        btnCheckout.innerHTML = `<span class=\"spinner\"></span> PROCESSANDO...`;\n        btnCheckout.style.pointerEvents = \"none\";\n\n        try {\n            // Garante que o SDK est√° dispon√≠vel\n            await loadExternalScript(\"https://sdk.mercadopago.com/js/v2\");\n\n            // Simula o tempo de resposta da API\n            setTimeout(() => {\n                const overlay = document.createElement('div');\n                overlay.className = 'api-simulada-overlay';\n                overlay.innerHTML = `\n                    <div class=\"api-simulada-content\">\n                        <img src=\"https://img.icons8.com/color/96/mercado-pago.png\" alt=\"Mercado Pago\">\n                        <h3>Ambiente de Demonstra√ß√£o</h3>\n                        <p>A API do Mercado Pago foi carregada com sucesso via script din√¢mico para garantir <strong>Performance M√°xima (Core Web Vitals)</strong>.</p>\n                        <div class=\"status-badge\">DEVELOPER MODE: ONLINE</div>\n                        <button onclick=\"this.parentElement.parentElement.remove()\" class=\"btn-close-api\">VOLTAR AO PROJETO</button>\n                    </div>\n                `;\n                document.body.appendChild(overlay);\n\n                // Reset do bot√£o\n                btnCheckout.innerHTML = \"FINALIZAR INSCRI√á√ÉO AGORA\";\n                btnCheckout.style.pointerEvents = \"all\";\n            }, 1500);\n\n        } catch (error) {\n            btnCheckout.innerHTML = \"ERRO NA CONEX√ÉO\";\n            btnCheckout.style.pointerEvents = \"all\";\n        }\n    };\n\n    // 5. EVENT LISTENERS\n    if (offer_mockup) offer_mockup.addEventListener(\"click\", focus);\n    if (btnTrigger) btnTrigger.addEventListener(\"click\", abrirModal);\n    if (cta_faq) cta_faq.addEventListener(\"click\", abrirModal);\n    if (btn_hero__button) btn_hero__button.addEventListener(\"click\", abrirModal);\n    if (btnIcon) btnIcon.addEventListener(\"click\", abrirModal);\n    if (btnClose) btnClose.addEventListener(\"click\", fecharModal);\n    if (btnCheckout) btnCheckout.addEventListener(\"click\", handleCheckout);\n    \n    //Focus\n    function focus(){\n        offer_mockup.style.opacity = .5;\n        quero.focus()\n    }\n\n    // Fechar ao clicar fora ou ESC\n    window.addEventListener(\"click\", (e) => { if (e.target === modal) fecharModal(); });\n    document.addEventListener(\"keydown\", (e) => { if (e.key === \"Escape\") fecharModal(); });\n}","import '../scss/style.scss';\n\n// 2. Importa o CSS Cr√≠tico APENAS em ambiente de desenvolvimento\nif (import.meta.env.DEV) {\n  import('../scss/critical.scss');\n}\n\n// Importamos as fun√ß√µes de outros arquivos (o Vite vai unir tudo)\nimport { configurarRetencao } from './retencao.js';\nimport themeToggle from './themeToggle.js';\nimport observar from './observar.js';\nimport modal_checkout from './modal_checkout.js';\nimport monitor_inp from './monitor_inp.js';\n\nwindow.addEventListener('load', () => {\n    // 1. O Monitor de INP fica fora para n√£o ser \"adiado\"\n\n    // 2. Lista de tarefas \"pesadas\" que podem esperar a folga do processador\n    const tarefas = [\n        () => themeToggle(),\n        () => modal_checkout(),\n        () => observar(),\n        () => configurarRetencao()\n    ];\n\n    const processarComOciosidade = (deadline) => {\n        // Enquanto o navegador disser que tem tempo (timeRemaining > 1ms)\n        // e houver tarefas na fila, execute-as.\n        while (deadline.timeRemaining() > 1 && tarefas.length > 0) {\n            const tarefa = tarefas.shift();\n            tarefa();\n        }\n\n        // Se o tempo da folga acabou mas a fila n√£o, agenda para a pr√≥xima folga\n        if (tarefas.length > 0) {\n            requestIdleCallback(processarComOciosidade);\n        } else {\n            console.log(\"üöÄ Todos os sistemas iniciados em tempo ocioso.\");\n        }\n    };\n\n    // 3. Dispara o processo respeitando a ociosidade\n    if ('requestIdleCallback' in window) {\n        // O timeout de 2000 garante que, se o site estiver MUITO pesado, \n        // ele force a execu√ß√£o ap√≥s 2 segundos.\n        requestIdleCallback(processarComOciosidade, { timeout: 2000 });\n    } else {\n        // Fallback inteligente para navegadores que n√£o suportam (Safari antigo)\n        // Fatiamos as tarefas em pequenos blocos de 50ms para n√£o travar.\n        const fallback = () => {\n            if (tarefas.length > 0) {\n                (tarefas.shift())();\n                setTimeout(fallback, 50);\n            }\n        };\n        fallback();\n    }\n});"],"names":["configurarRetencao","modal","btnFicar","btnSair","isModalOpen","ativarRetencao","event","msg","themeToggle","observer","observerOptions","entries","entry","target","el","modal_checkout","btnTrigger","btnClose","btnCheckout","btnIcon","cta_faq","btn_hero__button","offer_mockup","quero","loadExternalScript","src","resolve","reject","script","abrirModal","e","err","fecharModal","handleCheckout","overlay","focus","tarefas","observar","processarComOciosidade","deadline","fallback"],"mappings":"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"}