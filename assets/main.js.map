{"version":3,"file":"main.js","sources":["../../src/js/retencao.js","../../src/js/whatsapp.js","../../main.js"],"sourcesContent":["export function configurarRetencao() {\n    const modal = document.getElementById('modal-retencao');\n    const btnFicar = document.getElementById('btn-ficar');\n    const btnSair = document.getElementById('btn-sair');\n    \n    let isModalOpen = false;\n\n    const ativarRetencao = () => {\n        // Se j치 tem a trava no hist칩rico, n칚o faz nada\n        if (window.history.state?.trava) return;\n\n        // Cria o estado virtual \"trava\"\n        window.history.pushState({ trava: true }, \"\");\n        console.log(\"Sistema de reten칞칚o pronto.\");\n\n        window.onpopstate = (event) => {\n            // Se o usu치rio tentou voltar e o modal n칚o est치 aberto\n            if (!isModalOpen) {\n                isModalOpen = true;\n                modal.style.display = 'flex';\n\n                // Importante: Empurramos o estado de novo para o modal \"prender\" o usu치rio\n                // Mas sem disparar o onpopstate novamente\n                window.history.pushState({ trava: true }, \"\");\n            }\n        };\n    };\n\n  btnFicar.onclick = () => {\n    modal.style.display = 'none';\n    const msg = encodeURIComponent(\"Vim pela p치gina de Elite e quero meu Diagn칩stico de Escala. Estou cansado do operacional.\");\n    window.open(`https://wa.me/5511999999999?text=${msg}`, '_blank');\n};\n\n    btnSair.onclick = () => {\n        isModalOpen = false;\n        modal.style.display = 'none';\n        window.onpopstate = null; // Mata a fun칞칚o de interceptar\n        \n        // Volta dois n칤veis: o da trava e o da p치gina anterior real\n        window.history.go(-2); \n    };\n\n    document.addEventListener('click', ativarRetencao, { once: true });\n    document.addEventListener('scroll', ativarRetencao, { once: true });\n}","export function enviarWhatsApp(url) {\n    const form = document.querySelector('#seu-formulario'); // Use o ID do seu form\n    if (!form) return;\n\n    form.addEventListener('submit', async (e) => {\n        e.preventDefault();\n        const btn = form.querySelector('button');\n        btn.disabled = true;\n        btn.innerText = \"Enviando...\";\n\n        const dados = Object.fromEntries(new FormData(form).entries());\n\n        try {\n            const res = await fetch(url, {\n                method: 'POST',\n                body: JSON.stringify(dados)\n            });\n            if (res.ok) window.location.href = \"/obrigado.html\";\n        } catch (err) {\n            alert(\"Erro ao enviar. Tente novamente.\");\n            btn.disabled = false;\n            btn.innerText = \"Enviar\";\n        }\n    });\n}","import './src/scss/style.scss';\n\n// 2. Importa o CSS Cr칤tico APENAS em ambiente de desenvolvimento\nif (import.meta.env.DEV) {\n  import('./src/scss/critical.scss');\n}\n\n// Importamos as fun칞칫es de outros arquivos (o Vite vai unir tudo)\nimport { configurarRetencao } from './src/js/retencao.js';\nimport { enviarWhatsApp } from './src/js/whatsapp.js';\n\n// Aguarda o carregamento para n칚o travar a renderiza칞칚o inicial\nwindow.addEventListener('load', () => {\n    requestAnimationFrame(() => {\n        console.log(\"游 Sistemas de alta performance iniciados\");\n\n        // 1. Ativa a reten칞칚o (espera o primeiro clique para ganhar permiss칚o do Chrome)\n        configurarRetencao();\n\n        // 2. Ativa o envio do formul치rio\n        enviarWhatsApp('SUA_URL_DO_WORKER_AQUI');\n    });\n});"],"names":["configurarRetencao","modal","btnFicar","btnSair","isModalOpen","ativarRetencao","event","msg","enviarWhatsApp","url","form","e","btn","dados"],"mappings":"ssBAAO,SAASA,GAAqB,CACjC,MAAMC,EAAQ,SAAS,eAAe,gBAAgB,EAChDC,EAAW,SAAS,eAAe,WAAW,EAC9CC,EAAU,SAAS,eAAe,UAAU,EAElD,IAAIC,EAAc,GAElB,MAAMC,EAAiB,IAAM,CAErB,OAAO,QAAQ,OAAO,QAG1B,OAAO,QAAQ,UAAU,CAAE,MAAO,EAAI,EAAI,EAAE,EAC5C,QAAQ,IAAI,6BAA6B,EAEzC,OAAO,WAAcC,GAAU,CAEtBF,IACDA,EAAc,GACdH,EAAM,MAAM,QAAU,OAItB,OAAO,QAAQ,UAAU,CAAE,MAAO,EAAI,EAAI,EAAE,EAEpD,EACJ,EAEFC,EAAS,QAAU,IAAM,CACvBD,EAAM,MAAM,QAAU,OACtB,MAAMM,EAAM,mBAAmB,2FAA2F,EAC1H,OAAO,KAAK,oCAAoCA,CAAG,GAAI,QAAQ,CACnE,EAEIJ,EAAQ,QAAU,IAAM,CACpBC,EAAc,GACdH,EAAM,MAAM,QAAU,OACtB,OAAO,WAAa,KAGpB,OAAO,QAAQ,GAAG,EAAE,CACxB,EAEA,SAAS,iBAAiB,QAASI,EAAgB,CAAE,KAAM,GAAM,EACjE,SAAS,iBAAiB,SAAUA,EAAgB,CAAE,KAAM,GAAM,CACtE,CC7CO,SAASG,EAAeC,EAAK,CAChC,MAAMC,EAAO,SAAS,cAAc,iBAAiB,EAChDA,GAELA,EAAK,iBAAiB,SAAU,MAAOC,GAAM,CACzCA,EAAE,eAAc,EAChB,MAAMC,EAAMF,EAAK,cAAc,QAAQ,EACvCE,EAAI,SAAW,GACfA,EAAI,UAAY,cAEhB,MAAMC,EAAQ,OAAO,YAAY,IAAI,SAASH,CAAI,EAAE,SAAS,EAE7D,GAAI,EACY,MAAM,MAAMD,EAAK,CACzB,OAAQ,OACR,KAAM,KAAK,UAAUI,CAAK,CAC1C,CAAa,GACO,KAAI,OAAO,SAAS,KAAO,iBACvC,MAAc,CACV,MAAM,kCAAkC,EACxCD,EAAI,SAAW,GACfA,EAAI,UAAY,QACpB,CACJ,CAAC,CACL,CCZA,OAAO,iBAAiB,OAAQ,IAAM,CAClC,sBAAsB,IAAM,CACxB,QAAQ,IAAI,2CAA2C,EAGvDZ,EAAA,EAGAQ,EAAe,wBAAwB,CAC3C,CAAC,CACL,CAAC"}